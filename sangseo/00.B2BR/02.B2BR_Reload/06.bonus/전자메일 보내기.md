```
sudo apt install exim4-base
sudo apt install exim4-config
```
exim4-config 설치하기

```
dpkg-reconfigure exim4-config
```
![[Pasted image 20240421193640.png]]
위 상태에서 인터넷 선택하기..
+ **인터넷 사이트**
시스템이 네트워크에 연결되어 있고 메일은 SMTP를 사용해 직접 보내고 받습니다. 다음 화면에서 시스템의 메일 이름이나 사용할 도메인의 목록 등 기본적인 질문을 물어봅니다.

+ **스마트호스트가 메일 보내기**
이 시나리오에서는 다른 컴퓨터를 통해 메일을 보냅니다. 그 다른 컴퓨터를 “스마트호스트”라고 하고, 메일을 목적지에 보내는 역할을 담당합니다. 스마트호스트는 보통 받은 메일을 저장해 놓고 있으므로, 여러분의 컴퓨터를 계속 연결해 놓지 않아도 됩니다. 메일을 받을 때는 fetchmail과 같은 프로그램으로 가져올 수도 있습니다.
보통 스마트호스트는 인터넷 서비스 회사의 메일 서버를 말합니다. 전화 접속 사용자의 경우에는 분명히 인터넷 서비스 회사의 서버를 말합니다. 스마트호스트는 회사의 메일 서버가 될 수도 있고, 내부 네트워크에 있는 다른 시스템이 될 수도 있습니다.

+ **스마트호스트가 메일을 보내고, 로컬 메일 없음**
이 옵션은 앞의 옵션과 같지만 로컬 전자메일 도메인에 대한 메일을 처리하지 않습니다. 시스템 내부의 메일은(예를 들어 시스템 관리자에게 보내는 메일은) 계속 처리합니다.

+ **로컬 배달**
시스템이 기본값으로 이렇게 설정되어 있습니다.

+ **지금 설정 안함**
무슨 일을 하는 지 확실히 알고 있는 경우에만 선택합니다. 이 옵션을 사용하면 메일 시스템을 설정되지 않은 상태로 남겨 놓습니다. 설정하지 않으면 메일을 보내거나 받을 수 없을 뿐만아니라 시스템 유틸리티가 보내는 중요한 메시지를 놓칠 수 있습니다.

일단 여기서 internet을 누르고 넘어간다.
***
![[Pasted image 20240421201501.png]]
기본입력으로 넘어간다.
![[Pasted image 20240421201558.png]]
입력된 주소들을 지우고 넘어간다.
![[Pasted image 20240421201735.png]]
도메인을 적어준다.
만약 naver와 google로 보내겠다면 naver.com:google.com으로 적는다.
![[Pasted image 20240421201751.png]]
비워주고 넘어간다.
![[Pasted image 20240421201857.png]]
비워준다.
![[Pasted image 20240421202327.png]]
no 선택
![[Pasted image 20240421202046.png]]
![[Pasted image 20240421202103.png]]
no를 누른다.
***
# 악
![[Pasted image 20240421202533.png]]
자 위와같이 수정한후 아래의 명령을 실행하면 exim config파일이 자동으로 생성된다.
```
update-exim4.conf -d /etc/exim4 -o /etc/exim4/exim4.conf
ls /etc/exim4
```

여기까지가 기본적인 Exim4의 설정단계이다. 이렇게 하면 기본적으로 메일을 받는것은 문제 없이 될것이다.  
아울러 POP3또한 qpopper패키지를 설치하게 되면 별다른 설정없이 ?POP3서비스를 이용할수 있다.
# SMTP 인증
이제 메일을 보내는 작업을 하게 될것이다.  
일반적으로 모든 메일서버는 릴레이를 제한하여야 하는데 그 이유는 무분별한 스팸메일을 막기 위해서 이다.  
그러나 가끔 개념이 없는 관리자는 이런것을 무시하고 메일서버를 대충 설치하는 경우 해당 서버가 스패머들에의해  
엄청난양의 스팸메일을 뿌리거나 네트워크 대역폭을 낭비하는 경우가 생긴다.  
따라서 서버의 릴레이를 제한하고 인증된 사용자만이 메일을 보낼수 있도록 셋팅하도록 한다.  
맨처음에 설치한 패키지중 sasl2-bin 패키지가 이러한 SMTP인증을 해주는 데몬 패키지 이다.  
그 첫번째 단계로 우선 Exim4의 설정을 SMTP인증으로 변경하는 작업을 해보도록 하자  
`/etc/exim4/exim4.conf.template` 파일을 연다.

![[Pasted image 20240421204333.png]]
위 부분의 주석을 없앤다.
![[Pasted image 20240421204515.png]]
![[Pasted image 20240421204545.png]]
![[Pasted image 20240421204626.png]]
주석을 없앤 모습은 위와 같다.
```
update-exim4.conf -d /etc/exim4 -o /etc/exim4/exim4.conf
```
저장하고 나와서 exim4.conf화일을 재생성 해준다.
![[Pasted image 20240421204921.png]]
sasl에
![[Pasted image 20240421204948.png]]
debian=exim을 추가해준다.
